/* start page_load */
$(function(){$('[data-toggle="tooltip"]').tooltip()});
/* end page_load */
/* start notification */function n(t,e){$(".alert").alert("close");
// status : info, danger, success
    var a='<div class="alert alert-'+e+' alert-dismissible fade show container notification" role="alert">';a+=t;a+='<button type="button" class="close" data-dismiss="alert" aria-label="Close">';a+='<span aria-hidden="true">&times;</span>';a+="</button>";a+="</div>";$("body").append(a);setTimeout(function(){$(".alert").alert("close")},1e4)}
/* end get_statistics */
/* start get_statistics */function a(){$.ajax({method:"GET",url:"api/statistic/read.php"}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.article+"</td>";a+="<td>"+e.barcode+"</td>";a+="<td>"+e.user+"</td>";a+="<td>"+e.project+"</td>";a+="<td>"+e.date+"</td>";a+="</tr>"});$("#table-statistic").html(a)}).fail(function(t){var e="<tr>";e+="<td colspan='8'>"+t["responseJSON"].message+"</td>";e+="</tr>";$("#table-statistic").html(e)})}
/* end get_statistics */
/* start statisticsearch */$("#statisticsearch").keyup(function(t){var e=$(t.target).val();if(e.length>0){$.ajax({method:"GET",url:"api/statistics/search.php?search="+e}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.article+"</td>";a+="<td>"+e.user+"</td>";a+="<td>"+e.project+"</td>";a+="<td>"+e.created+"</td>";a+="</tr>"});$("#table-project").html(a)})}else{a()}});
/* end statisticsearch */
/* start get_projects */function r(){$.ajax({method:"GET",url:"api/project/read.php"}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.project+"</td>";a+="<td>"+e.description+"</td>";a+="<td>"+e.user+"</td>";a+="<td>";a+="<a href='#' data-toggle='modal' data-target='#editProjectModal' data-project-id='"+e.project_id+"' data-project='"+e.project+"' data-description='"+e.description+"'>Redigér</a>";a+="</td>";a+="<td>";a+="<a href='#' class='delete-project' data-project-id='"+e.project_id+"' data-project='"+e.project+"'>Slet</a>";a+="</td>";a+="</tr>"});$("#table-project").html(a)}).fail(function(t){var e="<tr>";e+="<td colspan='8'>"+t["responseJSON"].message+"</td>";e+="</tr>";$("#table-project").html(e)})}
/* end get_projects */
/* start editProjectModal */$("#editProjectModal").on("show.bs.modal",function(t){var e=$(t.relatedTarget);var a=e.data("project-id");var r=e.data("project");var d=e.data("description");var i=$(this);i.find(".modal-body input#edit-project-id").val(a);i.find(".modal-body input#edit-project-name").val(r);i.find(".modal-body textarea").val(d)});
/* end editProjectModal */
/* start projectsearch */$("#projectsearch").keyup(function(t){var e=$(t.target).val();if(e.length>0){$.ajax({method:"POST",url:"api/project/search.php",data:$(t.target).serialize()}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.project+"</td>";a+="<td>"+e.description+"</td>";a+="<td>"+e.user+"</td>";a+="<td>";a+="<a href='#' data-toggle='modal' data-target='#editProjectModal' data-project-id='"+e.project_id+"' data-project='"+e.project+"' data-description='"+e.description+"'>Redigér</a>";a+="</td>";a+="<td>";a+="<a href='#' class='delete-project' data-project-id='"+e.project_id+"' data-project='"+e.project+"'>Slet</a>";a+="</td>";a+="</tr>"});$("#table-project").html(a)}).fail(function(t){var e="<tr>";e+="<td colspan='8'>"+t["responseJSON"].message+"</td>";e+="</tr>";$("#table-project").html(e)})}else{r()}});
/* end projectsearch */
/* start form-new-project */$(".form-new-project").submit(function(t){t.preventDefault();var e=$(this);$.ajax({method:"POST",url:"api/project/create.php",data:e.serialize()}).done(function(t){n(t["message"],"success");r();$(".modal").modal("hide")}).fail(function(t){n(t["responseJSON"].message,"danger")})});
/* end form-new-project */
/* start form-edit-project */$(".form-edit-project").submit(function(t){t.preventDefault();//this will not allow browser to move to a different URL
    var e=$(this);$.ajax({method:"POST",url:"api/project/update.php",data:e.serialize()}).done(function(t){n(t["message"],"success");r();$(".modal").modal("hide")}).fail(function(t){n(t["responseJSON"].message,"danger")})});
/* end form-edit-project */
/* start delete-project */$(document).on("click",".delete-project",function(t){var e=$(t.target).data("project-id");var a=$(t.target).data("project");if(confirm("Er du sikker på at slette projektet: "+a+"?")){$.ajax({method:"POST",url:"api/project/delete.php",data:"project_id="+e}).done(function(t){n(t["message"],"success");r()}).fail(function(t){n(t["responseJSON"].message,"danger")})}});
/* end delete-project */
/* start get_articles */function l(){$.ajax({method:"GET",url:"api/article/read.php"}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.article+"</td>";a+="<td>"+e.category+"</td>";a+="<td>"+e.barcode+"</td>";a+="<td>"+e.tray_number+"</td>";a+="<td>"+(e.quantity-e.on_loan)+"</td>";a+="<td>"+e.on_loan+"</td>";a+="<td>"+e.quantity+"</td>";a+="<td>";a+="<a href='#' data-toggle='modal' data-target='#editArticleModal' data-barcode='"+e.barcode+"'>Redigér</a>";a+="</td>";a+="<td>";a+="<a href='#' class='delete-article' data-article-id='"+e.article_id+"' data-article='"+e.article+"'>Slet</a>";a+="</td>";a+="</tr>"});$("#table-article").html(a)}).fail(function(t){var e="<tr>";e+="<td colspan='8'>"+t["responseJSON"].message+"</td>";e+="</tr>";$("#table-article").html(e)})}
/* end get_articles */
/* start delete-article */$(document).on("click",".delete-article",function(t){var e=$(t.target).data("article-id");var a=$(t.target).data("article-id");if(confirm("Er du sikker på at slette artiklen: "+a+"?")){$.ajax({method:"POST",url:"api/delete.php",data:"article_id="+e}).done(function(t){n(t["message"],"success");l()}).fail(function(t){n(t["responseJSON"].message,"danger")})}});
/* end delete-article */
/* start articlesearch */$("#articlesearch").keyup(function(t){var e=$(t.target).val();if(e.length>0){$.ajax({method:"POST",url:"api/article/search.php",data:$(t.target).serialize()}).done(function(t){var a="";$.each(t,function(t,e){a+="<tr>";a+="<td>"+e.article+"</td>";a+="<td>"+e.category+"</td>";a+="<td>"+e.barcode+"</td>";a+="<td>"+e.tray_number+"</td>";a+="<td>"+(e.quantity-e.on_loan)+"</td>";a+="<td>"+e.on_loan+"</td>";a+="<td>"+e.quantity+"</td>";a+="<td>";a+="<a href='#' data-toggle='modal' data-target='#editArticleModal' data-barcode='"+e.barcode+"'>Redigér</a>";a+="</td>";a+="<td>";a+="<a href='#' class='delete-article' data-article-id='"+e.article_id+"' data-article='"+e.article+"'>Slet</a>";a+="</td>";a+="</tr>"});$("#table-article").html(a)}).fail(function(t){var e="<tr>";e+="<td colspan='8'>"+t["responseJSON"].message+"</td>";e+="</tr>";$("#table-article").html(e)})}else{l()}});
/* end articlesearch */
/* start form-edit-article */$("#form-edit-article").submit(function(t){t.preventDefault();var e=$(this);$.ajax({method:"POST",url:"api/article/update.php",data:e.serialize()}).done(function(t){n(t["message"],"success");l();$(".modal").modal("hide")}).fail(function(t){n(t["responseJSON"].message,"danger")})});
/* end form-edit-article */
/* start editArticleModal */$("#editArticleModal").on("show.bs.modal",function(t){var e=$(t.relatedTarget);var a=$(this);$.ajax({method:"POST",url:"api/article/read_one.php",data:"barcode="+e.data("barcode")}).done(function(t){a.find(".modal-body input#edit-article-id").val(t.article_id);a.find(".modal-body input#edit-article").val(t.article);a.find(".modal-body select#article-category").val(t.category_id);a.find(".modal-body input#edit-article-barcode").val(t.barcode);a.find(".modal-body input#edit-article-tray_number").val(t.tray_number);a.find(".modal-body input#edit-article-quantity").val(t.quantity)}).fail(function(t){console.log(t["responseJSON"].message)})});
/* end editArticleModal */
/* start form-new-article input */$("#form-new-article input").keyup(function(){var t=$("#form-new-article input#new-article-location").val();var e=$("#form-new-article input#new-article-prefix").val();var a=$("#form-new-article input#new-article-tray_number").val();if(t.length===4&&e.length===4&&a.length===4){$("input#new-article-barcode").val(t+"."+e+"."+a)}});
/* end form-new-article input */
/* start add_beginning_zeros */function c(t,e){t=t.toString();return t.length<e?c("0"+t,e):t}
/* end add_beginning_zeros */
/* start form-new-article */$("#form-new-article").submit(function(t){t.preventDefault();var e=$(this);var a=e.find("#new-article-location").val();var r=e.find("#new-article-prefix").val();var d=e.find("#new-article-tray_number").val();var i=a+"."+r+"."+c(d,4);var o=e.serialize()+"&barcode="+i;$.ajax({method:"POST",url:"api/article/create.php",data:o}).done(function(t){n(t["message"],"success");l();$(".modal").modal("hide")}).fail(function(t){n(t["responseJSON"].message,"danger")})});
/* end form-new-article */
/* start check-barcode */$(".form-loan #check-barcode").click(function(t){t.preventDefault();var e=$(".form-loan #loan-barcode").val();if(e.length>0){$.ajax({method:"POST",url:"api/article/read_one.php",data:"barcode="+e}).done(function(t){$(".form-loan #loan-article").val(t["article"]);n("Artikel fundet: "+t["article"],"success")}).fail(function(t){n(t["responseJSON"].message,"danger");if($(".form-loan #loan-article").val().length>0){$(".form-loan #loan-article").val("")}})}else{n("Scan venligst en stregkode","info")}});
/* end check-barcode */
/* start form-loan */$(".form-loan").submit(function(t){t.preventDefault();if($(".form-loan input#loan-article").val().length>0){var e=$(this);$.ajax({method:"POST",url:"api/user/loan.php",data:e.serialize()}).done(function(t){n(t.message,"success")})}else{n("Validér stregkoden","success");$(".form-loan input#check-barcode").focus()}});
/* end form-loan */
/* start modal */$(".modal").on("show.bs.modal",function(t){$(".alert").alert("close")});
/* end form-loan */